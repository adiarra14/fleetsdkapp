FROM eclipse-temurin:17-jre-alpine

# Create app directory
WORKDIR /app

# Copy the JAR file
COPY lib/maxvision-edge-protocol-gateway-service-sdk.jar /app/app.jar

# Set Spring profile for backend
ENV SPRING_PROFILES_ACTIVE=backend
ENV SERVER_PORT=6060
ENV JAVA_OPTS="-Xmx512m -Xms256m"

# Expose port
EXPOSE 6060

# Run the application
CMD ["sh", "-c", "java $JAVA_OPTS -jar /app/app.jar --spring.profiles.active=${SPRING_PROFILES_ACTIVE} --server.port=${SERVER_PORT}"]
